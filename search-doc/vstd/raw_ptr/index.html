<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Tools and reasoning principles for raw pointers.  The tools here are meant to address “real Rust pointers, including all their subtleties on the Rust Abstract Machine, to the largest extent that is reasonable.”"><title>vstd::raw_ptr - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="vstd" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.1 (4eb161250 2025-03-15)" data-channel="1.85.1" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../vstd/index.html">vstd</a></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module raw_ptr</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#pointer-model" title="Pointer model">Pointer model</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate vstd</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">vstd</a></span><h1>Module <span>raw_ptr</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/vstd/raw_ptr.rs.html#1-801">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Tools and reasoning principles for <a href="https://doc.rust-lang.org/std/primitive.pointer.html">raw pointers</a>.  The tools here are meant to address “real Rust pointers, including all their subtleties on the Rust Abstract Machine, to the largest extent that is reasonable.”</p>
<p>For a gentler introduction to some of the concepts here, see <a href="../simple_pptr/index.html" title="mod vstd::simple_pptr"><code>PPtr</code></a>, which uses a much-simplified pointer model.</p>
<h4 id="pointer-model"><a class="doc-anchor" href="#pointer-model">§</a>Pointer model</h4>
<p>A pointer consists of an address (<code>ptr.addr()</code> or <code>ptr as usize</code>), a provenance <code>ptr@.provenance</code>,
and a <code>ptr@.metadata</code> (which is trivial except for pointers to non-sized types).
Note that in spec code, pointer equality requires <em>all 3</em> to be equal, whereas runtime equality (eq)
only compares addresses and metadata.</p>
<p><code>*mut T</code> vs. <code>*const T</code> doesn’t have any semantic different and Verus treats them as the same;
they can be seamlessly cast to and fro.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.Dealloc.html" title="struct vstd::raw_ptr::Dealloc">Dealloc</a></div><div class="desc docblock-short">Permission to perform a deallocation with the global allocator</div></li><li><div class="item-name"><a class="struct" href="struct.DeallocData.html" title="struct vstd::raw_ptr::DeallocData">Dealloc<wbr>Data</a></div></li><li><div class="item-name"><a class="struct" href="struct.DynMetadata.html" title="struct vstd::raw_ptr::DynMetadata">DynMetadata</a></div></li><li><div class="item-name"><a class="struct" href="struct.IsExposed.html" title="struct vstd::raw_ptr::IsExposed">IsExposed</a></div></li><li><div class="item-name"><a class="struct" href="struct.PointsTo.html" title="struct vstd::raw_ptr::PointsTo">Points<wbr>To</a></div><div class="desc docblock-short">Permission to access possibly-initialized, <em>typed</em> memory.</div></li><li><div class="item-name"><a class="struct" href="struct.PointsToData.html" title="struct vstd::raw_ptr::PointsToData">Points<wbr>ToData</a></div></li><li><div class="item-name"><a class="struct" href="struct.PointsToRaw.html" title="struct vstd::raw_ptr::PointsToRaw">Points<wbr>ToRaw</a></div><div class="desc docblock-short">PointsToRaw
Variable-sized uninitialized memory.</div></li><li><div class="item-name"><a class="struct" href="struct.Provenance.html" title="struct vstd::raw_ptr::Provenance">Provenance</a></div></li><li><div class="item-name"><a class="struct" href="struct.PtrData.html" title="struct vstd::raw_ptr::PtrData">PtrData</a></div><div class="desc docblock-short">Model of a pointer <code>*mut T</code> or <code>*const T</code> in Rust’s abstract machine</div></li><li><div class="item-name"><a class="struct" href="struct.SharedReference.html" title="struct vstd::raw_ptr::SharedReference">Shared<wbr>Reference</a></div><div class="desc docblock-short">This is meant to be a replacement for <code>&amp;'a T</code> that allows Verus to keep track of
not just the <code>T</code> value but the pointer as well.
It would be better to get rid of this and use normal reference types <code>&amp;'a T</code>,
but there are a lot of unsolved implementation questions.
The existence of <code>SharedReference&lt;'a, T&gt;</code> is a stop-gap.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.MemContents.html" title="enum vstd::raw_ptr::MemContents">MemContents</a></div><div class="desc docblock-short">Represents (typed) contents of memory.</div></li><li><div class="item-name"><a class="enum" href="enum.Metadata.html" title="enum vstd::raw_ptr::Metadata">Metadata</a></div><div class="desc docblock-short">Metadata</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn._verus_external_fn_specification_3_core_32__58__58__32_ptr_32__58__58__32_null.html" title="fn vstd::raw_ptr::_verus_external_fn_specification_3_core_32__58__58__32_ptr_32__58__58__32_null">_verus_<wbr>external_<wbr>fn_<wbr>specification_<wbr>3_<wbr>core_<wbr>32__<wbr>58__<wbr>58__<wbr>32_<wbr>ptr_<wbr>32__<wbr>58__<wbr>58__<wbr>32_<wbr>null</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn._verus_external_fn_specification_4_core_32__58__58__32_ptr_32__58__58__32_null__mut.html" title="fn vstd::raw_ptr::_verus_external_fn_specification_4_core_32__58__58__32_ptr_32__58__58__32_null__mut">_verus_<wbr>external_<wbr>fn_<wbr>specification_<wbr>4_<wbr>core_<wbr>32__<wbr>58__<wbr>58__<wbr>32_<wbr>ptr_<wbr>32__<wbr>58__<wbr>58__<wbr>32_<wbr>null__<wbr>mut</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.allocate.html" title="fn vstd::raw_ptr::allocate">allocate</a></div></li><li><div class="item-name"><a class="fn" href="fn.axiom_ptr_mut_from_data.html" title="fn vstd::raw_ptr::axiom_ptr_mut_from_data">axiom_<wbr>ptr_<wbr>mut_<wbr>from_<wbr>data</a></div></li><li><div class="item-name"><a class="fn" href="fn.cast_array_ptr_to_slice_ptr.html" title="fn vstd::raw_ptr::cast_array_ptr_to_slice_ptr">cast_<wbr>array_<wbr>ptr_<wbr>to_<wbr>slice_<wbr>ptr</a></div></li><li><div class="item-name"><a class="fn" href="fn.cast_ptr_to_thin_ptr.html" title="fn vstd::raw_ptr::cast_ptr_to_thin_ptr">cast_<wbr>ptr_<wbr>to_<wbr>thin_<wbr>ptr</a></div></li><li><div class="item-name"><a class="fn" href="fn.cast_ptr_to_usize.html" title="fn vstd::raw_ptr::cast_ptr_to_usize">cast_<wbr>ptr_<wbr>to_<wbr>usize</a></div></li><li><div class="item-name"><a class="fn" href="fn.deallocate.html" title="fn vstd::raw_ptr::deallocate">deallocate</a></div></li><li><div class="item-name"><a class="fn" href="fn.expose_provenance.html" title="fn vstd::raw_ptr::expose_provenance">expose_<wbr>provenance</a></div></li><li><div class="item-name"><a class="fn" href="fn.group_raw_ptr_axioms.html" title="fn vstd::raw_ptr::group_raw_ptr_axioms">group_<wbr>raw_<wbr>ptr_<wbr>axioms</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptr_from_data.html" title="fn vstd::raw_ptr::ptr_from_data">ptr_<wbr>from_<wbr>data</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptr_mut_from_data.html" title="fn vstd::raw_ptr::ptr_mut_from_data">ptr_<wbr>mut_<wbr>from_<wbr>data</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptr_mut_read.html" title="fn vstd::raw_ptr::ptr_mut_read">ptr_<wbr>mut_<wbr>read</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptr_mut_write.html" title="fn vstd::raw_ptr::ptr_mut_write">ptr_<wbr>mut_<wbr>write</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptr_null.html" title="fn vstd::raw_ptr::ptr_null">ptr_<wbr>null</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptr_null_mut.html" title="fn vstd::raw_ptr::ptr_null_mut">ptr_<wbr>null_<wbr>mut</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptr_ref.html" title="fn vstd::raw_ptr::ptr_ref">ptr_ref</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptr_ref2.html" title="fn vstd::raw_ptr::ptr_ref2">ptr_<wbr>ref2</a></div></li><li><div class="item-name"><a class="fn" href="fn.ptrs_mut_eq.html" title="fn vstd::raw_ptr::ptrs_mut_eq">ptrs_<wbr>mut_<wbr>eq</a></div></li><li><div class="item-name"><a class="fn" href="fn.spec_cast_array_ptr_to_slice_ptr.html" title="fn vstd::raw_ptr::spec_cast_array_ptr_to_slice_ptr">spec_<wbr>cast_<wbr>array_<wbr>ptr_<wbr>to_<wbr>slice_<wbr>ptr</a></div></li><li><div class="item-name"><a class="fn" href="fn.spec_cast_ptr_to_thin_ptr.html" title="fn vstd::raw_ptr::spec_cast_ptr_to_thin_ptr">spec_<wbr>cast_<wbr>ptr_<wbr>to_<wbr>thin_<wbr>ptr</a></div></li><li><div class="item-name"><a class="fn" href="fn.spec_cast_ptr_to_usize.html" title="fn vstd::raw_ptr::spec_cast_ptr_to_usize">spec_<wbr>cast_<wbr>ptr_<wbr>to_<wbr>usize</a></div></li><li><div class="item-name"><a class="fn" href="fn.with_exposed_provenance.html" title="fn vstd::raw_ptr::with_exposed_provenance">with_<wbr>exposed_<wbr>provenance</a></div></li></ul></section></div></main></body></html>